<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoinbedrock</title>
    <style>
        body {
            margin: 0;
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #fff3e0;
            color: #333;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #f2a900, #ff6200);
            color: white;
            text-align: center;
            padding: 80px 20px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .hero h1 {
            font-size: 2.8rem;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .hero p {
            font-size: 1.2rem;
            margin: 10px 0;
        }

        /* Back Button */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            display: inline-flex;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 1rem;
            padding: 8px 12px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            transition: background-color 0.3s, transform 0.2s;
        }
        .back-button:hover {
            background-color: rgba(0, 0, 0, 0.4);
            transform: scale(1.1);
        }
        .back-button::before {
            content: '';
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 8px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6z"/></svg>') no-repeat center;
            background-size: contain;
        }

        /* Sections */
        .section {
            padding: 40px 20px;
            max-width: 1000px;
            margin: 0 auto;
            background-color: #ffedd5;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        .section h3 {
            color: #f2a900;
            font-size: 2rem;
            text-align: left;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Modules List */
        .modules {
            flex: 1;
            padding-right: 20px;
        }
        .modules a {
            display: block;
            width: 100%;
            padding: 12px 15px;
            margin-bottom: 10px;
            font-size: 1.2rem;
            background-color: #ffe0b2;
            border: 3px solid #f2a900;
            border-radius: 10px;
            text-decoration: none;
            color: #333;
            text-align: left;
            position: relative;
            transition: background-color 0.3s, transform 0.2s;
        }
        .modules a:hover {
            background-color: #ffd699;
            border-color: #ff6200;
            transform: scale(1.05);
        }
        .modules a span {
            margin-left: 15px;
        }

        /* Image Styling */
        .section img {
            max-width: 400px;
            width: 100%;
            height: auto;
            flex: 1;
            margin-left: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .hero p { font-size: 1rem; }
            .section h3 { font-size: 1.5rem; }
            .back-button { font-size: 0.9rem; padding: 6px 10px; }
            .section {
                flex-direction: column;
                align-items: center;
            }
            .modules { padding-right: 0; }
            .modules a { width: auto; }
            .section img { margin-left: 0; margin-top: 20px; max-width: 100%; }
        }
    </style>
    <style>
        /* Chat widget container (fixed bottom-right popup) */
        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            height: 400px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        /* Chat header with agent profile */
        .chat-header {
            background-color: #f2a900; /* Matches your Bitcoin orange theme */
            color: white;
            padding: 10px;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            display: flex;
            align-items: center;
        }

        .chat-header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 16px;
        }

        /* Chat body for messages */
        .chat-body {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }

        .message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 18px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background-color: #dcf8c6;
            align-self: flex-end;
            margin-left: auto;
        }

        .agent-message {
            background-color: #ffffff;
            border: 1px solid #ddd;
            align-self: flex-start;
        }

        /* Chat input area */
        .chat-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ccc;
        }

        .chat-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 5px;
        }

        .chat-input button {
            padding: 8px 12px;
            background-color: #f2a900; /* Matches theme */
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Toggle button to open/close chat */
        .chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #f2a900; /* Matches theme */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .chat-toggle img {
            width: 40px;
            height: 40px;
        }

        /* Close button in header */
        .close-chat {
            margin-left: auto;
            cursor: pointer;
            font-size: 20px;
        }
    </style>
    <!-- Add Puter.js for AI functionality -->
    <script src="https://js.puter.com/v2/"></script>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <a href="index.html" class="back-button">Back to Home</a>
        <h1>üèûÔ∏è The Bitcoin Journey Begins!</h1>
        <p>Learn about Bitcoin with fun and engaging lessons for all ages!</p>
    </section>

    <!-- Modules Section -->
    <section class="section">
        <div class="modules">
            <h3>Our Lesson Modules</h3>
            <a href="module1.html"><span>üìò Module 1: What is Money?</span></a>
            <a href="module2.html"><span>ü™ô Module 2: What is Bitcoin?</span></a>
            <a href="module3.html"><span>‚ö° Module 3: How Bitcoin Works</span></a>
            <a href="module4.html"><span>üåç Module 4: Why Bitcoin Matters</span></a>
        </div>
        <img src="images/logo-scroll.png" alt="Bitcoin White Paper for 8-12 Year Olds">
    </section>

    <!-- Chat toggle button (uses your attached image as icon) -->
    <div class="chat-toggle" onclick="toggleChat()">
        <img src="images/agent-profile.png" alt="AI Agent Icon"> <!-- Update path to your uploaded image -->
    </div>

    <!-- Chat widget popup -->
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">
            <img src="images/agent-profile.png" alt="AI Agent Profile"> <!-- Same image for profile -->
            <h3>Bitcoin Tutor AI</h3>
            <span class="close-chat" onclick="toggleChat()">&times;</span>
        </div>
        <div class="chat-body" id="chatBody">
            <!-- Messages will appear here -->
            <div class="agent-message">Hi, I'm Boulder, your CoinCoach! Ask me anything about Bitcoin basics, mining, wallets, or advanced topics.</div>
        </div>
        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Type your question...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // Function to toggle chat visibility
        function toggleChat() {
            const widget = document.getElementById('chatWidget');
            const toggle = document.querySelector('.chat-toggle');
            if (widget.style.display === 'flex') {
                widget.style.display = 'none';
                toggle.style.display = 'flex';
            } else {
                widget.style.display = 'flex';
                toggle.style.display = 'none';
            }
        }

        // Function to send user message and get AI response
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const chatBody = document.getElementById('chatBody');
            const userText = input.value.trim();

            if (userText === '') return;

            // Add user message
            const userMsg = document.createElement('div');
            userMsg.classList.add('message', 'user-message');
            userMsg.textContent = userText;
            chatBody.appendChild(userMsg);

            // Clear input
            input.value = '';

            // Add a loading indicator
            const loadingMsg = document.createElement('div');
            loadingMsg.classList.add('message', 'agent-message');
            loadingMsg.textContent = 'Thinking...';
            chatBody.appendChild(loadingMsg);

            try {
                const aiText = await getAIResponse(userText);
                loadingMsg.textContent = aiText; // Replace loading with response
            } catch {
                loadingMsg.textContent = 'Sorry, something went wrong. Try again!';
            }

            chatBody.scrollTop = chatBody.scrollHeight; // Scroll to bottom
        }

        // Function to get AI response using Puter.js
        async function getAIResponse(userQuery) {
            try {
                const response = await puter.ai.chat(userQuery, {
                    model: 'gpt-4.1-nano', // Free model; check https://developer.puter.com for others
                    system: 'You are Boulder, a fun and friendly CoinCoach for kids aged 8-12 learning about Bitcoin on Bitcoinbedrock.org. Explain concepts simply, use engaging language, keep responses short and educational, and encourage questions.'
                });
                return response.message.content[0].text || 'Oops, I didn‚Äôt get that right‚Äîask me again!';
            } catch (error) {
                console.error('Puter.js Error:', error);
                return 'Sorry, I‚Äôm having trouble connecting. Try again later!';
            }
        }

        // Handle Enter key for sending message
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>